<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>测试API调用</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .result {
            background: #f5f5f5;
            padding: 10px;
            margin: 10px 0;
            border-radius: 3px;
            white-space: pre-wrap;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #0056b3;
        }
        textarea {
            width: 100%;
            height: 100px;
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h1>测试API调用情况</h1>
    
    <div class="test-section">
        <h2>测试段落翻译和单词处理</h2>
        <textarea id="testText" placeholder="输入英文段落...">Your life is enhanced when you choose to change your perspective. Don't leave your future to chance or wait for things to get better mysteriously on their own. You must take direction of your hopes and aspirations. Begin to build your confidence and work through problems rather than avoid them. Remember that power is not necessarily control over situations, but the ability to deal with whatever comes your way.</textarea>
        <br>
        <button onclick="testTranslation()">测试翻译和单词处理</button>
        <div id="result" class="result"></div>
    </div>

    <script>
        async function testTranslation() {
            const resultDiv = document.getElementById('result');
            const text = document.getElementById('testText').value;
            
            resultDiv.textContent = '正在测试...';
            
            try {
                // 监听控制台输出
                const originalLog = console.log;
                const logs = [];
                console.log = function(...args) {
                    logs.push(args.join(' '));
                    originalLog.apply(console, arguments);
                };
                
                // 调用翻译API
                const response = await fetch('http://localhost:8080/api/enhanced/paragraph', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ text })
                });
                
                const data = await response.json();
                
                // 恢复console.log
                console.log = originalLog;
                
                // 显示结果
                resultDiv.textContent = `翻译结果:\n${JSON.stringify(data, null, 2)}\n\n控制台日志:\n${logs.join('\n')}`;
                
            } catch (error) {
                resultDiv.textContent = `错误: ${error.message}`;
            }
        }
    </script>
</body>
</html>