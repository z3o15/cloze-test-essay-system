# å®Œå½¢å¡«ç©ºç³»ç»Ÿéƒ¨ç½²æŒ‡å—

## ğŸ“‹ éƒ¨ç½²å‰å‡†å¤‡

### 1. ç³»ç»Ÿè¦æ±‚
- Docker Desktop (Windows/Mac) æˆ– Docker Engine (Linux)
- Docker Compose v2.0+
- è‡³å°‘ 4GB å¯ç”¨å†…å­˜
- è‡³å°‘ 2GB å¯ç”¨ç£ç›˜ç©ºé—´

### 2. APIå¯†é’¥é…ç½®
åœ¨éƒ¨ç½²å‰ï¼Œæ‚¨éœ€è¦è·å–ä»¥ä¸‹APIæœåŠ¡çš„å¯†é’¥ï¼š

#### è…¾è®¯ç¿»è¯‘API
1. è®¿é—® [è…¾è®¯äº‘æ§åˆ¶å°](https://console.cloud.tencent.com/)
2. å¼€é€šæœºå™¨ç¿»è¯‘æœåŠ¡
3. è·å– `SecretId` å’Œ `SecretKey`

#### ç«å±±å¼•æ“AI API
1. è®¿é—® [ç«å±±å¼•æ“æ§åˆ¶å°](https://console.volcengine.com/)
2. å¼€é€šè±†åŒ…å¤§æ¨¡å‹æœåŠ¡
3. è·å– API Key

### 3. ç¯å¢ƒå˜é‡é…ç½®
```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘ç¯å¢ƒå˜é‡æ–‡ä»¶
# å¡«å…¥æ‚¨çš„APIå¯†é’¥
```

## ğŸš€ å¿«é€Ÿéƒ¨ç½²

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨éƒ¨ç½²è„šæœ¬ï¼ˆæ¨èï¼‰
```powershell
# å¯åŠ¨æœåŠ¡
.\deploy.ps1 start

# é‡æ–°æ„å»ºå¹¶å¯åŠ¨
.\deploy.ps1 start -Build

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
.\deploy.ps1 status

# åœæ­¢æœåŠ¡
.\deploy.ps1 stop

# æ¸…ç†æ‰€æœ‰èµ„æº
.\deploy.ps1 clean -Clean
```

### æ–¹æ³•äºŒï¼šä½¿ç”¨Docker Compose
```bash
# æ„å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up --build -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# åœæ­¢æœåŠ¡
docker-compose down
```

## ğŸŒ è®¿é—®åœ°å€

éƒ¨ç½²æˆåŠŸåï¼Œæ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹åœ°å€è®¿é—®ç³»ç»Ÿï¼š

- **å‰ç«¯åº”ç”¨**: http://localhost:3000
- **åç«¯API**: http://localhost:8080
- **Nginxä»£ç†**: http://localhost:80
- **APIæ–‡æ¡£**: http://localhost:8080/api-docs

## ğŸ“Š æœåŠ¡æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend      â”‚    â”‚   Backend       â”‚    â”‚   Database      â”‚
â”‚   (Vue.js)      â”‚    â”‚   (Node.js)     â”‚    â”‚   (PostgreSQL)  â”‚
â”‚   Port: 3000    â”‚    â”‚   Port: 8080    â”‚    â”‚   Port: 5432    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚     Redis       â”‚
                    â”‚   (Cache)       â”‚
                    â”‚   Port: 6379    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ é…ç½®è¯´æ˜

### æ•°æ®åº“é…ç½®
- **æ•°æ®åº“å**: cloze_test
- **ç”¨æˆ·å**: postgres
- **å¯†ç **: postgres123
- **ç«¯å£**: 5432

### Redisé…ç½®
- **ä¸»æœº**: redis
- **ç«¯å£**: 6379
- **æ•°æ®åº“**: 0

### ç¯å¢ƒå˜é‡è¯´æ˜
| å˜é‡å | è¯´æ˜ | é»˜è®¤å€¼ |
|--------|------|--------|
| `TENCENT_APP_ID` | è…¾è®¯äº‘SecretId | å¿…å¡« |
| `TENCENT_APP_KEY` | è…¾è®¯äº‘SecretKey | å¿…å¡« |
| `VOLCANO_API_KEY` | ç«å±±å¼•æ“API Key | å¿…å¡« |
| `JWT_SECRET` | JWTç­¾åå¯†é’¥ | å»ºè®®ä¿®æ”¹ |
| `NODE_ENV` | è¿è¡Œç¯å¢ƒ | production |
| `LOG_LEVEL` | æ—¥å¿—çº§åˆ« | info |

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. Dockerå¯åŠ¨å¤±è´¥
```bash
# æ£€æŸ¥Dockeræ˜¯å¦è¿è¡Œ
docker ps

# é‡å¯DockeræœåŠ¡
# Windows: é‡å¯Docker Desktop
# Linux: sudo systemctl restart docker
```

#### 2. ç«¯å£å†²çª
å¦‚æœç«¯å£è¢«å ç”¨ï¼Œå¯ä»¥ä¿®æ”¹ `docker-compose.yml` ä¸­çš„ç«¯å£æ˜ å°„ï¼š
```yaml
ports:
  - "3001:3000"  # å°†å‰ç«¯ç«¯å£æ”¹ä¸º3001
  - "8081:8080"  # å°†åç«¯ç«¯å£æ”¹ä¸º8081
```

#### 3. APIè°ƒç”¨å¤±è´¥
- æ£€æŸ¥ `.env` æ–‡ä»¶ä¸­çš„APIå¯†é’¥æ˜¯å¦æ­£ç¡®
- ç¡®è®¤APIæœåŠ¡æ˜¯å¦å·²å¼€é€šå¹¶æœ‰è¶³å¤Ÿä½™é¢
- æŸ¥çœ‹åç«¯æ—¥å¿—ï¼š`docker-compose logs backend`

#### 4. æ•°æ®åº“è¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥æ•°æ®åº“å®¹å™¨çŠ¶æ€
docker-compose ps postgres

# æŸ¥çœ‹æ•°æ®åº“æ—¥å¿—
docker-compose logs postgres

# é‡å¯æ•°æ®åº“æœåŠ¡
docker-compose restart postgres
```

### æ—¥å¿—æŸ¥çœ‹
```bash
# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡æ—¥å¿—
docker-compose logs

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
docker-compose logs backend
docker-compose logs frontend
docker-compose logs postgres
docker-compose logs redis

# å®æ—¶æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f backend
```

### æ•°æ®å¤‡ä»½
```bash
# å¤‡ä»½æ•°æ®åº“
docker-compose exec postgres pg_dump -U postgres cloze_test > backup.sql

# æ¢å¤æ•°æ®åº“
docker-compose exec -T postgres psql -U postgres cloze_test < backup.sql
```

## ğŸ”„ æ›´æ–°éƒ¨ç½²

### æ›´æ–°ä»£ç 
```bash
# æ‹‰å–æœ€æ–°ä»£ç 
git pull

# é‡æ–°æ„å»ºå¹¶éƒ¨ç½²
.\deploy.ps1 restart -Build
```

### æ›´æ–°é…ç½®
```bash
# ä¿®æ”¹ç¯å¢ƒå˜é‡åé‡å¯
.\deploy.ps1 restart
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### 1. ç¼“å­˜é…ç½®
æ ¹æ®ä½¿ç”¨æƒ…å†µè°ƒæ•´ç¼“å­˜æ—¶é—´ï¼š
```env
CACHE_TTL_TRANSLATION=86400  # ç¿»è¯‘ç¼“å­˜24å°æ—¶
CACHE_TTL_WORD=604800        # å•è¯ç¼“å­˜7å¤©
CACHE_TTL_SESSION=1800       # ä¼šè¯ç¼“å­˜30åˆ†é’Ÿ
```

### 2. æ•°æ®åº“ä¼˜åŒ–
- å®šæœŸæ¸…ç†è¿‡æœŸæ•°æ®
- ç›‘æ§æ•°æ®åº“æ€§èƒ½
- æ ¹æ®éœ€è¦è°ƒæ•´è¿æ¥æ± å¤§å°

### 3. èµ„æºç›‘æ§
```bash
# æŸ¥çœ‹å®¹å™¨èµ„æºä½¿ç”¨æƒ…å†µ
docker stats

# æŸ¥çœ‹ç£ç›˜ä½¿ç”¨æƒ…å†µ
docker system df
```

## ğŸ”’ å®‰å…¨å»ºè®®

1. **ä¿®æ”¹é»˜è®¤å¯†ç **: ç”Ÿäº§ç¯å¢ƒä¸­ä¿®æ”¹æ•°æ®åº“é»˜è®¤å¯†ç 
2. **ä½¿ç”¨HTTPS**: é…ç½®SSLè¯ä¹¦å¯ç”¨HTTPS
3. **APIå¯†é’¥å®‰å…¨**: å¦¥å–„ä¿ç®¡APIå¯†é’¥ï¼Œä¸è¦æäº¤åˆ°ä»£ç ä»“åº“
4. **å®šæœŸæ›´æ–°**: å®šæœŸæ›´æ–°Dockeré•œåƒå’Œä¾èµ–åŒ…
5. **è®¿é—®æ§åˆ¶**: é…ç½®é˜²ç«å¢™é™åˆ¶ä¸å¿…è¦çš„ç«¯å£è®¿é—®

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœåœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š

1. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„æ•…éšœæ’é™¤éƒ¨åˆ†
2. æ£€æŸ¥æœåŠ¡æ—¥å¿—è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯
3. ç¡®è®¤ç¯å¢ƒé…ç½®æ˜¯å¦æ­£ç¡®
4. è”ç³»æŠ€æœ¯æ”¯æŒå›¢é˜Ÿ