# 翻译服务实现对齐文档

## 项目特性规范

| 特性 | 说明 |
|------|------|
| 直接API调用 | 移除边缘函数依赖，直接在前端代码中调用腾讯词典API和火山AI API |
| 翻译结果一致性 | 确保腾讯翻译和火山翻译的结果格式一致，便于前端统一处理 |
| 容错机制 | 实现API调用失败的优雅降级，从腾讯→火山→百度顺序尝试 |
| 安全性 | API密钥通过环境变量管理，不在代码中硬编码 |

## 原始需求

用户明确要求：
1. **不使用边缘函数**：移除对EdgeOne Pages边缘函数的依赖
2. **确保翻译一致性**：保证腾讯翻译和火山翻译的结果格式一致，便于前端统一处理

## 边界确认

1. **仅修改单词查询相关功能**：本次修改仅涉及单词查询API的实现，不影响其他功能模块
2. **保留原有的缓存机制**：继续使用本地缓存和词典功能，确保性能不受影响
3. **API密钥配置不变**：仍使用.env文件管理API密钥，保持原有的环境变量命名规则
4. **兼容性保证**：修改不应破坏现有的API调用接口，确保前端调用逻辑无需改变

## 需求理解

当前项目使用EdgeOne Pages边缘函数作为腾讯/百度/火山API的代理层，通过`/api/word-query`路由提供服务。由于某些原因，用户希望直接在前端代码中调用这些API，不再依赖边缘函数。同时，需要确保不同翻译服务返回的结果格式一致，便于前端统一处理。

主要技术挑战：
1. 将边缘函数中的API调用逻辑迁移到前端代码中
2. 实现统一的响应格式处理，确保不同服务返回的数据结构一致
3. 实现健壮的错误处理和服务降级机制
4. 确保API密钥等敏感信息的安全管理

## 疑问澄清

当前需求已足够明确，无需进一步澄清。主要实现方向是：
1. 在`src/utils/api.ts`中实现直接调用腾讯词典API、火山AI API和百度翻译API的函数
2. 移除对本地API代理的依赖
3. 实现统一的响应格式处理函数
4. 优化错误处理和超时控制

通过这些修改，可以满足用户不使用边缘函数且确保翻译一致性的需求。