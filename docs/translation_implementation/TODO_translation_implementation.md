# 翻译服务实现待办事项

## 待配置项

### 1. API密钥配置

| API服务 | 环境变量 | 配置说明 | 优先级 |
|---------|----------|----------|--------|
| 腾讯词典API | VITE_TENCENT_APP_ID | 腾讯AI开放平台App ID | 高 |
| 腾讯词典API | VITE_TENCENT_KEY | 腾讯AI开放平台密钥 | 高 |
| 火山AI API | VITE_VOLCANO_API_KEY | 火山AI API密钥（已有配置） | 高 |
| 百度翻译API | VITE_BAIDU_APP_ID | 百度翻译API App ID（已有配置） | 中 |
| 百度翻译API | VITE_BAIDU_SECRET_KEY | 百度翻译API密钥（已有配置） | 中 |

**操作指引**：
1. 打开`.env`文件（位于项目根目录）
2. 根据实际情况添加或更新上述环境变量
3. 保存文件后重启开发服务器以应用更改

### 2. TypeScript类型声明

**待处理项**：
- 确保`src/vite-env.d.ts`文件中包含所有新增的环境变量类型声明

**操作指引**：
```typescript
// 在src/vite-env.d.ts文件中添加以下声明：
interface ImportMetaEnv {
  readonly VITE_TENCENT_APP_ID: string;
  readonly VITE_TENCENT_KEY: string;
  // 其他现有环境变量...
}

interface ImportMeta {
  readonly env: ImportMetaEnv;
}
```

## 待验证项

### 1. API调用测试

**待验证**：
- 腾讯词典API调用是否正常工作
- 火山AI API调用是否保持原有功能
- 百度翻译API作为备用方案是否有效

**测试方法**：
1. 配置所有API密钥
2. 依次禁用不同的API密钥，验证降级机制
3. 检查响应格式是否一致

### 2. 性能测试

**待验证**：
- 3秒超时设置是否合理
- 缓存机制是否有效减少API调用
- 响应时间是否在可接受范围内

**测试方法**：
1. 测量不同场景下的响应时间
2. 测试重复查询同一单词的性能
3. 在网络不稳定情况下测试服务可用性

## 潜在风险

### 1. API限流和费用

**风险**：
- 直接在前端调用API可能导致API密钥泄露风险
- 频繁调用可能触发API限流或产生额外费用

**缓解措施**：
- 考虑在未来实现后端代理服务
- 优化缓存策略，减少不必要的API调用
- 设置合理的使用限制

### 2. 浏览器兼容性

**风险**：
- crypto模块在某些浏览器可能有兼容性问题

**缓解措施**：
- 测试在主流浏览器中的兼容性
- 必要时考虑使用兼容性更好的加密库

### 3. 网络环境依赖

**风险**：
- 直接API调用依赖用户网络环境
- 某些地区可能无法访问特定API服务

**缓解措施**：
- 增强本地词典覆盖范围
- 优化离线体验
- 定期检查各API服务可用性

## 后续优化建议

1. **增加更多本地词典数据**，减少对API的依赖
2. **实现请求合并**，减少并发API调用
3. **添加使用统计**，监控API使用情况
4. **实现智能降级策略**，基于历史成功率动态调整API调用顺序
5. **考虑实现后端代理服务**，提高安全性

通过完成上述待办事项，可以确保翻译服务稳定运行，并持续优化用户体验。