# 任务共识文档：将百度翻译改为腾讯翻译君词典 API

## 1. 需求描述

将项目中的百度翻译API调用替换为腾讯翻译君词典API调用，保持相同的功能接口和用户体验，同时确保系统稳定性和兼容性。

## 2. 技术实现方案

### 2.1 核心实现策略
1. 创建新的腾讯翻译君词典API调用函数
2. 修改现有调用百度翻译API的地方，替换为新函数
3. 保留缓存机制、错误处理和备用方案
4. 更新环境变量配置

### 2.2 腾讯翻译君词典API集成

#### 2.2.1 环境变量配置
需要在环境变量中配置以下腾讯翻译君API相关参数：
- `TENCENT_APP_ID`: 腾讯翻译君应用ID
- `TENCENT_APP_KEY`: 腾讯翻译君应用密钥
- `TENCENT_TRANSLATE_URL`: 腾讯翻译君API地址

#### 2.2.2 API调用函数
为`translate.ts`和`word-query.ts`分别实现腾讯翻译君API调用函数：
- `callTencentTranslateAPI`: 调用腾讯翻译API进行文本翻译
- `callTencentDictAPI`: 调用腾讯词典API获取单词信息

### 2.3 技术约束和集成方案

#### 2.3.1 依赖要求
- 继续使用现有的axios进行HTTP请求
- 继续使用crypto生成API签名
- 保持KV缓存机制不变

#### 2.3.2 接口兼容性
- 保持现有函数签名不变
- 确保返回数据格式与原实现兼容
- 维护相同的错误处理模式

## 3. 任务边界限制

- 只修改API调用部分，不改变缓存机制和整体架构
- 不引入新的第三方库
- 保持备用机制（火山AI）不变
- 不改变前端调用API的方式

## 4. 验收标准

### 4.1 功能验收
- 翻译功能：能够正确翻译文本，支持中译英、英译中
- 单词查询：能够获取单词音标、释义和例句
- 缓存机制：相同请求能够命中缓存，减少API调用

### 4.2 性能验收
- 响应时间满足用户体验要求
- 缓存命中率达到预期

### 4.3 稳定性验收
- API调用失败时能正确处理并回退
- 错误日志记录完整
- 环境变量缺失时给出明确提示

### 4.4 代码质量验收
- 代码风格与现有项目一致
- 包含完整的函数注释
- 错误处理完善