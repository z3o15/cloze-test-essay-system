# 任务对齐文档：将百度翻译改为腾讯翻译君词典 API

## 1. 项目上下文分析

### 1.1 现有项目结构与技术栈
- 项目类型：基于 Vue.js 的前端应用
- 部署平台：EdgeOne Pages
- 核心功能：翻译服务和单词查询功能
- 当前依赖：
  - axios：用于HTTP请求
  - crypto：用于生成签名
  - @vercel/kv：用于缓存

### 1.2 现有API使用分析
- 当前使用百度翻译API作为主要翻译服务
- 火山AI作为备用翻译服务
- 存在缓存机制，提高性能和减少API调用
- 环境变量管理API密钥

## 2. 需求理解确认

### 2.1 原始需求
将现有代码中的百度翻译API调用替换为腾讯翻译君词典API调用，保持相同的功能和接口规范。

### 2.2 边界确认
- 保持现有函数签名和返回值格式
- 保留缓存机制和错误处理逻辑
- 确保替换后服务能够正常工作，包括备用方案
- 兼容现有的API密钥管理方式，通过环境变量配置

### 2.3 需求理解
需要修改两个主要文件中的API调用逻辑：
1. `edge-functions/translate.ts` - 翻译功能
2. `edge-functions/word-query.ts` - 单词查询功能

## 3. 智能决策策略

### 3.1 腾讯翻译君词典API集成策略
- 创建新的API调用函数，替代`callBaiduTranslateAPI`
- 保持现有的错误处理和备用逻辑
- 更新环境变量配置要求

### 3.2 实现决策
1. 保留现有的函数参数和返回值结构，确保兼容性
2. 新增腾讯翻译君词典API的签名生成和请求构建逻辑
3. 保持缓存键生成逻辑不变，以维持现有缓存
4. 更新错误消息和日志，明确指示使用的API服务

## 4. 最终共识

### 4.1 技术方案
- 创建新的腾讯翻译君API调用函数
- 修改现有文件中的API调用逻辑
- 更新环境变量配置文档
- 保留现有的备用机制和缓存策略

### 4.2 验收标准
- 翻译功能正常工作，返回预期格式的结果
- 单词查询功能正常工作，包括音标、释义和例句
- 缓存机制有效，减少重复API调用
- 错误处理正常，在API调用失败时能够回退到备用方案
- 环境变量配置正确，不包含硬编码的API密钥