# 项目部署指南

## 部署准备

### 已完成步骤
- ✅ 项目构建成功，构建文件位于 `dist` 目录
- ✅ EdgeOne Pages配置文件 `edgeone.json` 已配置
- ✅ 边缘函数已编写完成，位于 `edge-functions` 目录

## EdgeOne Pages部署步骤

### 1. 部署环境变量配置

在EdgeOne Pages控制台中设置以下环境变量：
- VOLCANO_API_KEY
- VOLCANO_API_URL
- BAIDU_APP_ID
- BAIDU_SECRET_KEY
- KV_URL
- KV_REST_API_URL
- KV_REST_API_TOKEN
- KV_REST_API_READ_ONLY_TOKEN

### 2. 部署方式

#### 方式一：通过EdgeOne Pages控制台部署
1. 访问EdgeOne Pages控制台
2. 创建新项目或选择现有项目
3. 上传dist目录内容
4. 确保edge-functions目录被正确包含
5. 配置环境变量
6. 触发部署

#### 方式二：通过EdgeOne CLI部署（推荐）
```bash
# 安装EdgeOne CLI（如果尚未安装）
npm install -g @cloudflare/wrangler

# 登录EdgeOne
tencentcloud edgeone login

# 部署项目
tencentcloud edgeone pages deploy dist --name cloze_test
```

## 部署验证

部署完成后，使用以下命令验证API端点是否正常工作：

```bash
# 测试翻译API
curl -X POST -H "Content-Type: application/json" -d '{"text":"test","from":"en","to":"zh"}' https://your-deployment-url/api/translate

# 测试单词查询API
curl -X POST -H "Content-Type: application/json" -d '{"word":"test"}' https://your-deployment-url/api/word-query
```

## 常见问题排查

1. **405错误**：确保API只使用POST方法访问
2. **500错误**：检查环境变量配置是否正确，查看函数日志
3. **跨域问题**：确认CORS配置是否正确应用
4. **函数未找到**：检查edgeone.json中的路由配置是否正确

## 注意事项

- 部署前确保所有环境变量已正确配置
- 定期检查函数日志，监控API调用情况
- 如有问题，请参考 `docs/api_405_error` 目录下的问题分析文档