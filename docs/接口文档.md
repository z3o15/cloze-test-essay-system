# ğŸ”Œ æ¥å£æ–‡æ¡£

## ä¸€ã€é€šç”¨è¯´æ˜
- **åŸºç¡€URL**: `/api/v1/`
- **è®¤è¯æ–¹å¼**: æš‚æ— ï¼ˆåç»­å¯æ‰©å±•Tokenè®¤è¯ï¼‰
- **æ•°æ®æ ¼å¼**: JSON
- **å­—ç¬¦ç¼–ç **: UTF-8
- **è¯·æ±‚å¤´**: `Content-Type: application/json`

## äºŒã€æ¥å£åˆ—è¡¨

### 2.1 ç¿»è¯‘ç›¸å…³æ¥å£
| æ¥å£å | æ–¹æ³• | URL | æƒé™ | è¯´æ˜ |
|--------|------|-----|------|------|
| åŸºç¡€ç¿»è¯‘ | POST | /translate | å…¬å¼€ | åŸºç¡€æ–‡æœ¬ç¿»è¯‘åŠŸèƒ½ |
| æ‰¹é‡ç¿»è¯‘ | POST | /translate/batch | å…¬å¼€ | æ‰¹é‡ç¿»è¯‘å¤šä¸ªæ®µè½ |
| å¢å¼ºæ®µè½ç¿»è¯‘ | POST | /enhanced/paragraph | å…¬å¼€ | ç¿»è¯‘è‹±æ–‡æ®µè½å¹¶æå–å•è¯ |
| ç¿»è¯‘å†å² | GET | /translate/history | å…¬å¼€ | è·å–ç¿»è¯‘è®°å½• |
| æ¸…é™¤ç¼“å­˜ | POST | /translate/cache/clear | å…¬å¼€ | æ¸…é™¤ç¿»è¯‘ç¼“å­˜ |
| ~~ç¿»è¯‘ç»Ÿè®¡~~ | ~~GET~~ | ~~/translate/stats~~ | ~~å…¬å¼€~~ | **å·²ç§»é™¤** - éæ ¸å¿ƒåŠŸèƒ½ |

### 2.2 æ–‡ç« å¤„ç†æ¥å£
| æ¥å£å | æ–¹æ³• | URL | æƒé™ | è¯´æ˜ |
|--------|------|-----|------|------|
| æ–‡ç« å¤„ç† | POST | /essay/process | å…¬å¼€ | å¤„ç†å®Œæ•´æ–‡ç« ï¼Œåˆ†æ®µç¿»è¯‘å¹¶æå–å•è¯ |

### 2.3 AIå•è¯å¤„ç†æ¥å£ â­
| æ¥å£å | æ–¹æ³• | URL | æƒé™ | è¯´æ˜ |
|--------|------|-----|------|------|
| AIæœåŠ¡é…ç½®çŠ¶æ€ | GET | /ai-words/config-status | å…¬å¼€ | æ£€æŸ¥AIæœåŠ¡é…ç½®çŠ¶æ€ |
| å•ä¸ªå•è¯AIå¤„ç† | POST | /ai-words/process-single | å…¬å¼€ | å•ä¸ªå•è¯AIæ™ºèƒ½å¤„ç† |
| æ‰¹é‡å•è¯AIå¤„ç† | POST | /ai-words/batch-process | å…¬å¼€ | æ‰¹é‡å•è¯AIæ™ºèƒ½å¤„ç† |
| è¿‡æ»¤å¤æ‚å•è¯ | POST | /ai-words/filter-complex | å…¬å¼€ | è¿‡æ»¤éš¾åº¦â‰¥5çš„å¤æ‚å•è¯ |
| æ£€æŸ¥ç¿»è¯‘å¿…è¦æ€§ | POST | /ai-words/check-translation | å…¬å¼€ | æ£€æŸ¥å•è¯æ˜¯å¦éœ€è¦æ˜¾ç¤ºç¿»è¯‘ |

### 2.4 å•è¯ç®¡ç†æ¥å£
| æ¥å£å | æ–¹æ³• | URL | æƒé™ | è¯´æ˜ |
|--------|------|-----|------|------|
| å•è¯æŸ¥è¯¢ | GET | /word/:word | å…¬å¼€ | ä»æ•°æ®åº“åŒ¹é…å•è¯ç¿»è¯‘ |
| å•è¯é¢„æŸ¥è¯¢ | GET | /words/pre-query/:word | å…¬å¼€ | ä¼˜åŒ–çš„å•è¯æŸ¥è¯¢æ¥å£ |
| å¥åº·æ£€æŸ¥ | GET | /health | å…¬å¼€ | æœåŠ¡çŠ¶æ€æ£€æŸ¥ |

## ä¸‰ã€æ¥å£è¯¦æƒ…

### 3.1 ç¿»è¯‘æ¥å£

#### POST /enhanced/paragraph
**åŠŸèƒ½**: ç¿»è¯‘è‹±æ–‡æ®µè½å¹¶æå–å•è¯ï¼ˆå·²å®ç°ï¼‰

**è¯·æ±‚å‚æ•°**
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| text | string | âœ… | å¾…ç¿»è¯‘çš„è‹±æ–‡æ®µè½ |
| source_lang | string | âŒ | æºè¯­è¨€ï¼Œé»˜è®¤'en' |
| target_lang | string | âŒ | ç›®æ ‡è¯­è¨€ï¼Œé»˜è®¤'zh' |

**è¯·æ±‚ç¤ºä¾‹**
```json
{
  "text": "This is a sample paragraph for translation.",
  "source_lang": "en",
  "target_lang": "zh"
}
```

**å“åº”ç¤ºä¾‹**
```json
{
  "code": "SUCCESS",
  "data": {
    "original": "This is a sample paragraph for translation.",
    "translated": "è¿™æ˜¯ä¸€ä¸ªç”¨äºç¿»è¯‘çš„ç¤ºä¾‹æ®µè½ã€‚",
    "cached": false
  },
  "message": "ç¿»è¯‘æˆåŠŸ"
}
```

#### POST /translate
**åŠŸèƒ½**: åŸºç¡€ç¿»è¯‘åŠŸèƒ½

#### POST /translate/batch
**åŠŸèƒ½**: æ‰¹é‡ç¿»è¯‘

### 3.2 AIå•è¯å¤„ç†æ¥å£ â­

#### GET /ai-words/config-status
**åŠŸèƒ½**: æ£€æŸ¥AIæœåŠ¡é…ç½®çŠ¶æ€

**å“åº”ç¤ºä¾‹**
```json
{
  "success": true,
  "data": {
    "aiServiceAvailable": false,
    "fallbackMode": "rules",
    "configStatus": "AIæœåŠ¡æœªé…ç½®ï¼Œä½¿ç”¨åŸºç¡€è§„åˆ™åˆ¤æ–­"
  },
  "message": "é…ç½®çŠ¶æ€æ£€æŸ¥å®Œæˆ"
}
```

#### POST /ai-words/process
**åŠŸèƒ½**: å•ä¸ªå•è¯AIæ™ºèƒ½å¤„ç†

**è¯·æ±‚å‚æ•°**
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| word | string | âœ… | è¦å¤„ç†çš„è‹±æ–‡å•è¯ |

**è¯·æ±‚ç¤ºä¾‹**
```json
{
  "word": "sophisticated"
}
```

**å“åº”ç¤ºä¾‹**
```json
{
  "success": true,
  "data": {
    "word": "sophisticated",
    "pronunciation": "/sÉ™ËˆfÉªstÉªkeÉªtÉªd/",
    "definition": "having great knowledge or experience",
    "translation": "å¤æ‚çš„ï¼Œç²¾å¯†çš„",
    "partOfSpeech": "adjective",
    "difficultyLevel": 6,
    "frequencyRank": null,
    "exampleSentences": null,
    "synonyms": null,
    "antonyms": null,
    "etymology": null,
    "isActive": true,
    "aiJudgment": "ä½¿ç”¨åŸºç¡€è§„åˆ™åˆ¤æ–­ï¼ˆAIæœåŠ¡ä¸å¯ç”¨ï¼‰"
  },
  "message": "AIå•è¯å¤„ç†æˆåŠŸ"
}
```

#### POST /ai-words/batch-process
**åŠŸèƒ½**: æ‰¹é‡å•è¯AIæ™ºèƒ½å¤„ç†

**è¯·æ±‚å‚æ•°**
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| words | string[] | âœ… | è¦å¤„ç†çš„è‹±æ–‡å•è¯æ•°ç»„ |

**è¯·æ±‚ç¤ºä¾‹**
```json
{
  "words": ["dog", "elephant", "sophisticated", "beautiful"]
}
```

**å“åº”ç¤ºä¾‹**
```json
{
  "success": true,
  "data": [
    {
      "word": "dog",
      "pronunciation": "/dÉ”ËÉ¡/",
      "definition": "a domesticated carnivorous mammal",
      "translation": "ç‹—",
      "partOfSpeech": "noun",
      "difficultyLevel": 1,
      "aiJudgment": "ä½¿ç”¨åŸºç¡€è§„åˆ™åˆ¤æ–­ï¼ˆAIæœåŠ¡ä¸å¯ç”¨ï¼‰"
    },
    {
      "word": "sophisticated",
      "pronunciation": "/sÉ™ËˆfÉªstÉªkeÉªtÉªd/",
      "definition": "having great knowledge or experience",
      "translation": "å¤æ‚çš„ï¼Œç²¾å¯†çš„",
      "partOfSpeech": "adjective", 
      "difficultyLevel": 6,
      "aiJudgment": "ä½¿ç”¨åŸºç¡€è§„åˆ™åˆ¤æ–­ï¼ˆAIæœåŠ¡ä¸å¯ç”¨ï¼‰"
    }
  ],
  "message": "æ‰¹é‡AIå¤„ç†å®Œæˆï¼Œå…±å¤„ç† 4 ä¸ªå•è¯"
}
```

#### POST /ai-words/filter-complex
**åŠŸèƒ½**: è¿‡æ»¤å¤æ‚å•è¯ï¼ˆéš¾åº¦â‰¥5ï¼‰

**è¯·æ±‚å‚æ•°**
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| words | string[] | âœ… | è¦è¿‡æ»¤çš„è‹±æ–‡å•è¯æ•°ç»„ |

**è¯·æ±‚ç¤ºä¾‹**
```json
{
  "words": ["cat", "dog", "sophisticated", "beautiful", "extraordinary", "simple"]
}
```

**å“åº”ç¤ºä¾‹**
```json
{
  "success": true,
  "data": {
    "complexWords": ["sophisticated", "beautiful", "extraordinary"],
    "totalCount": 6,
    "complexCount": 3
  },
  "message": "è¿‡æ»¤å®Œæˆï¼Œæ‰¾åˆ° 3 ä¸ªå¤æ‚å•è¯"
}
```

#### POST /ai-words/check-translation
**åŠŸèƒ½**: æ£€æŸ¥å•è¯ç¿»è¯‘å¿…è¦æ€§

**è¯·æ±‚å‚æ•°**
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| word | string | âœ… | è‹±æ–‡å•è¯ |
| translation | string | âœ… | ä¸­æ–‡ç¿»è¯‘ |

**è¯·æ±‚ç¤ºä¾‹**
```json
{
  "word": "sophisticated",
  "translation": "å¤æ‚çš„"
}
```

**å“åº”ç¤ºä¾‹**
```json
{
  "success": true,
  "data": {
    "word": "sophisticated",
    "translation": "å¤æ‚",
    "needsTranslation": true,
    "difficultyLevel": 6,
    "reason": "å¤æ‚å•è¯å»ºè®®æ˜¾ç¤ºç¿»è¯‘"
  },
  "message": "ç¿»è¯‘æ£€æŸ¥å®Œæˆ"
}
```

### 3.3 å•è¯ç®¡ç†æ¥å£

#### GET /word/:word
**è·¯å¾„å‚æ•°**
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| word | string | âœ… | è¦æŸ¥è¯¢çš„è‹±æ–‡å•è¯ |

**å“åº”ç¤ºä¾‹**
```json
{
  "code": "SUCCESS",
  "data": {
    "english": "example",
    "chinese": "ä¾‹å­ï¼Œç¤ºä¾‹",
    "found": true,
    "source": "database"
  }
}
```

## å››ã€é”™è¯¯ç è§„èŒƒ

### 4.1 é€šç”¨é”™è¯¯ç 
| é”™è¯¯ç  | è¯´æ˜ | HTTPçŠ¶æ€ç  |
|--------|------|------------|
| SUCCESS | è¯·æ±‚æˆåŠŸ | 200 |
| ERROR_001 | å‚æ•°ç¼ºå¤±æˆ–æ ¼å¼é”™è¯¯ | 400 |
| ERROR_002 | ç¿»è¯‘æœåŠ¡å¼‚å¸¸ | 500 |
| ERROR_003 | æ•°æ®åº“è¿æ¥å¤±è´¥ | 500 |
| ERROR_004 | APIé…é¢ä¸è¶³ | 429 |
| **ERROR_005** | **AIæœåŠ¡å¼‚å¸¸** | **500** |
| ERROR_500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ | 500 |

### 4.2 é”™è¯¯å“åº”æ ¼å¼
```json
{
  "success": false,
  "error": {
    "code": "ERROR_001",
    "message": "å‚æ•°ç¼ºå¤±ï¼šwordå­—æ®µä¸ºå¿…å¡«é¡¹",
    "details": "è¯·æ£€æŸ¥è¯·æ±‚å‚æ•°æ ¼å¼"
  },
  "timestamp": "2024-12-24T10:00:00Z"
}
```

## äº”ã€è¯·æ±‚é™åˆ¶

### 5.1 é¢‘ç‡é™åˆ¶
| æ¥å£ç±»å‹ | é™åˆ¶ | æ—¶é—´çª—å£ |
|----------|------|----------|
| å•è¯å¤„ç† | 100æ¬¡/åˆ†é’Ÿ | 60ç§’ |
| æ‰¹é‡å¤„ç† | 10æ¬¡/åˆ†é’Ÿ | 60ç§’ |
| ç¿»è¯‘æ¥å£ | 50æ¬¡/åˆ†é’Ÿ | 60ç§’ |
| æŸ¥è¯¢æ¥å£ | 200æ¬¡/åˆ†é’Ÿ | 60ç§’ |

### 5.2 æ•°æ®é™åˆ¶
| å‚æ•° | é™åˆ¶ |
|------|------|
| å•è¯é•¿åº¦ | 1-50å­—ç¬¦ |
| æ‰¹é‡å¤„ç†æ•°é‡ | æœ€å¤š50ä¸ªå•è¯ |
| æ®µè½é•¿åº¦ | æœ€å¤š5000å­—ç¬¦ |

## å…­ã€å“åº”æ—¶é—´æ ‡å‡†

| æ¥å£ç±»å‹ | ç›®æ ‡å“åº”æ—¶é—´ | æœ€å¤§å“åº”æ—¶é—´ |
|----------|--------------|--------------|
| é…ç½®æ£€æŸ¥ | <100ms | 500ms |
| å•è¯å¤„ç† | <300ms | 1000ms |
| æ‰¹é‡å¤„ç† | <1000ms | 3000ms |
| å¤æ‚è¿‡æ»¤ | <500ms | 1500ms |
| ç¿»è¯‘æ£€æŸ¥ | <200ms | 800ms |

## ä¸ƒã€æµ‹è¯•ç”¨ä¾‹

### 7.1 æ­£å¸¸åœºæ™¯æµ‹è¯•
```bash
# å•è¯å¤„ç†æµ‹è¯•
curl -X POST http://localhost:3000/api/v1/ai-words/process \
  -H "Content-Type: application/json" \
  -d '{"word": "sophisticated"}'

# æ‰¹é‡å¤„ç†æµ‹è¯•  
curl -X POST http://localhost:3000/api/v1/ai-words/batch-process \
  -H "Content-Type: application/json" \
  -d '{"words": ["cat", "sophisticated", "beautiful"]}'

# å¤æ‚å•è¯è¿‡æ»¤æµ‹è¯•
curl -X POST http://localhost:3000/api/v1/ai-words/filter-complex \
  -H "Content-Type: application/json" \
  -d '{"words": ["cat", "dog", "sophisticated", "extraordinary"]}'
```

### 7.2 å¼‚å¸¸åœºæ™¯æµ‹è¯•
```bash
# å‚æ•°ç¼ºå¤±æµ‹è¯•
curl -X POST http://localhost:3000/api/v1/ai-words/process \
  -H "Content-Type: application/json" \
  -d '{}'

# æ— æ•ˆå•è¯æµ‹è¯•
curl -X POST http://localhost:3000/api/v1/ai-words/process \
  -H "Content-Type: application/json" \
  -d '{"word": ""}'

# è¶…é•¿æ•°ç»„æµ‹è¯•
curl -X POST http://localhost:3000/api/v1/ai-words/batch-process \
  -H "Content-Type: application/json" \
  -d '{"words": ["word1", "word2", ..., "word100"]}'
```

## å…«ã€ç‰ˆæœ¬ç®¡ç†

### 8.1 APIç‰ˆæœ¬
- **å½“å‰ç‰ˆæœ¬**: v1
- **ç‰ˆæœ¬è·¯å¾„**: `/api/v1/`
- **å‘åå…¼å®¹**: ä¿è¯v1ç‰ˆæœ¬ç¨³å®šæ€§

### 8.2 æ›´æ–°æ—¥å¿—
| ç‰ˆæœ¬ | æ—¥æœŸ | æ›´æ–°å†…å®¹ |
|------|------|----------|
| v1.0 | 2024-12-24 | åˆå§‹ç‰ˆæœ¬ï¼ŒåŸºç¡€ç¿»è¯‘åŠŸèƒ½ |
| v1.1 | 2024-12-24 | æ–°å¢AIå•è¯å¤„ç†åŠŸèƒ½æ¨¡å— |
| v1.2 | 2024-12-24 | **åŠŸèƒ½ä¼˜åŒ–**: ç§»é™¤ç¿»è¯‘ç»Ÿè®¡æ¨¡å—ï¼Œç®€åŒ–ç³»ç»Ÿå¤æ‚åº¦ï¼›ä¿®å¤ç«å±±ç¿»è¯‘APIçº§åˆ«åŒ¹é…é—®é¢˜ |

## ä¹ã€SDKç¤ºä¾‹

### 9.1 JavaScript SDK
```javascript
class ClozeTestAPI {
  constructor(baseURL = 'http://localhost:3000/api/v1') {
    this.baseURL = baseURL;
  }
  
  // AIå•è¯å¤„ç†
  async processWord(word) {
    const response = await fetch(`${this.baseURL}/ai-words/process`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ word })
    });
    return response.json();
  }
  
  // æ‰¹é‡å¤„ç†
  async batchProcess(words) {
    const response = await fetch(`${this.baseURL}/ai-words/batch-process`, {
      method: 'POST', 
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ words })
    });
    return response.json();
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const api = new ClozeTestAPI();
const result = await api.processWord('sophisticated');
console.log(result);
```